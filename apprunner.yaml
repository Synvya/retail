version: 1.0  
runtime: python311  
build:
  commands:
    # Create venv and install requirements during build
    build: 
      - python3 -m venv venv && source venv/bin/activate && pip3 install -r requirements.txt
run:
  network:
    port: 8000                   # Ensure App Runner expects traffic on port 8000
  command: venv/bin/python3 -m uvicorn --app-dir /app/src retail_backend.core.main:app --host 0.0.0.0 --port 8000
  env:
    - name: PYTHONPATH
      value: "/app/src"